{% extends 'layouts/base.twig' %}

{% block title %}Chức vụ
{% endblock %}

{% block content %}
	<div class="container-fluid mt-4">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h3 class="mb-0">Danh sách chức vụ</h3>
			<button class="btn btn-success btn-sm" id="btnAddPosition">
				<i class="fa fa-plus"></i>
				Thêm chức vụ
			</button>
		</div>

		<div class="row">
			{% for cv in positions %}
				<div class="col-md-4 mb-4">
					<div class="card shadow-sm border-left-success position-card h-100" style="cursor: pointer;" data-id="{{ cv.position_id }}" data-name="{{ cv.name }}" data-salary="{{ cv.base_salary }}" data-description="{{ cv.description }}">
						<div class="card-body d-flex justify-content-between align-items-center">
							<h5 class="card-title font-weight-bold mb-0">{{ cv.name }}</h5>
							<div class="dropdown">
								<button class="btn btn-light btn-sm dropdown-toggle dots-button" type="button" data-toggle="dropdown">
									<i class="fa fa-ellipsis-v"></i>
								</button>
								<div class="dropdown-menu dropdown-menu-right">
									<a class="dropdown-item btn-edit" href="#" data-id="{{ cv.position_id }}">Sửa</a>
									<a class="dropdown-item btn-delete text-danger" href="#" data-id="{{ cv.position_id }}">Xoá</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
	<!-- Modal xem chi tiết -->
	<div class="modal fade" id="modalDetailPosition" tabindex="-1" role="dialog" aria-labelledby="modalDetailLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="modalDetailLabel">Chi tiết chức vụ</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span>&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>
						<strong>Tên chức vụ:</strong>
						<span id="detailPositionName"></span>
					</p>
					<p>
						<strong>Lương cơ bản:</strong>
						<span id="detailBaseSalary"></span>
					</p>
					<p>
						<strong>Mô tả:</strong>
						<span id="detailDescription"></span>
					</p>
				</div>
			</div>
		</div>
	</div>


	<!-- Modal thêm/sửa chức vụ -->
	<div class="modal fade" id="modalPosition" tabindex="-1" role="dialog" aria-labelledby="modalPositionLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<form id="formPosition">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="modalPositionLabel">Thêm chức vụ</h5>
						<button type="button" class="close" data-dismiss="modal">
							<span>&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<input type="hidden" id="positionId" name="position_id">
						<div class="form-group">
							<label for="positionName">Tên chức vụ</label>
							<input type="text" class="form-control" id="positionName" name="name" required>
						</div>
						<div class="form-group">
							<label for="baseSalary">Lương cơ bản</label>
							<input type="number" class="form-control" id="baseSalary" name="base_salary" required>
						</div>
						<div class="form-group">
							<label for="description">Mô tả</label>
							<textarea class="form-control" id="description" name="description" rows="3"></textarea>
						</div>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary">Lưu</button>
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
					</div>
				</div>
			</form>
		</div>
	</div>

	<script src="{{env['APP_URL']}}/{{env['APP_NAME']}}/{{env['APP_PUBLIC']}}/assets/js/position.js"></script>

{% endblock %}
